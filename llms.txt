<!-- repo: clix-so/clix-ios-sdk -->
<!-- ref: main -->
<!-- commit: fe96a209185c16843bd9bbc7255aa7353528c013 -->
<!-- generated_at: 2025-12-03T04:54:09Z -->
# Platform: iOS

## /
- [Package](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Package.swift): Swift Package manifest configuring the Clix SPM library (iOS 15+), exposing target "Clix" (Sources) with SPM dependencies FirebaseMessaging and MMKV (version ranges), build settings defining DEBUG/RELEASE flags, and a ClixTests test target.
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/README.md): README documents Clix iOS SDK integration: initialize via Clix.initialize(ClixConfig), user/event APIs (setUserId, setUserProperty, trackEvent), push flows (ClixAppDelegate or Clix.

## Samples/BasicApp/ClixNotificationExtension
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/ClixNotificationExtension/NotificationService.swift): NotificationService.swift defines NotificationService, a UNNotificationServiceExtension subclass that registers ClixConfiguration.

## Samples/BasicApp/Sources
- [Apptheme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppTheme.swift): Defines AppTheme static Color constants for the BasicApp sample (background, surface, surfaceVariant, primary, buttonBackground, buttonText, text) using SwiftUI Color values—no side effects, used for consistent theming across views.
- [Appstate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppState.swift): Singleton ObservableObject (AppState.shared) exposing @Published deviceId and fcmToken (initial "Loading.
- [Basicapp](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/BasicApp.swift): Defines the BasicApp SwiftUI entry point, wiring the UIKit-based `AppDelegate` via `@UIApplicationDelegateAdaptor`, configuring global `UITextView` appearance, and presenting `ContentView` within the main `WindowGroup` scene.
- [Clixconfiguration](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/ClixConfiguration.swift): Singleton that loads ClixConfig.json from the app bundle (fatalError on failure), caches its contents, and exposes lazy properties (projectId, apiKey, endpoint, extraHeaders, logLevel defaulting to.
- [Appdelegate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppDelegate.swift): Sample AppDelegate subclass of ClixAppDelegate that initializes FirebaseCore/FirebaseMessaging and Clix (Clix.initialize), auto-handles permissions/landing URLs, listens for FCM token refresh, overrides APNS registration to fetch FCM token, set userId, and update AppState via Clix.
- [Contentview](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/ContentView.swift): ContentView.swift provides a SwiftUI sample (ContentView, InfoTextRow) that displays ClixConfiguration/AppState info and lets developers set userId (saved to UserDefaults → Clix.

## Sources/Core
- [Clixnotification](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixNotification.swift): Singleton bridging Firebase Messaging and UNUserNotificationCenter to register for remote notifications, handle FCM tokens, foreground/background delivery, taps (auto-open landing URLs), image attachment fetching, and server sync via Clix services; public APIs: configure, onMessage/onBackgroundMessage/onNotificationOpened, getToken, deleteToken, setApnsToken, requestPermission, handleLaunchOptions.
- [Clixconfig](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixConfig.swift): Defines the `ClixConfig` `Codable` struct used to initialize and configure the Clix SDK, encapsulating project ID, API key, API endpoint, log level, and extra HTTP headers with sensible defaults for network and logging behavior.
- [Clix](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/Clix.swift): Singleton SDK entrypoint that initializes Storage/Token/Event/Device/Notification services, manages environment/device/token, and exposes thread‑safe async/sync APIs (Clix.initialize, setUserId/setUserProperty/removeUserProperty, trackEvent, getDeviceId) with InitCoordinator-based init synchronization.
- [Clixappdelegate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixAppDelegate.swift): ClixAppDelegate is an open UIApplicationDelegate/UNUserNotificationCenterDelegate base class that wires UNUserNotificationCenter, forwards APNs token, launch/foreground/background notifications and responses to Clix.Notification, configurable via overridable properties; depends on FirebaseCore/FirebaseMessaging.
- [Clixenvironment](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixEnvironment.swift): Defines `ClixEnvironment`, a lightweight container for `ClixConfig` and mutable `ClixDevice` state, exposing `getDevice()`, `setDevice(_:)`, and a string representation used to describe the current SDK runtime environment.
- [Clixversion](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixVersion.swift): Internal ClixVersion struct exposing a static current version string ("1.6.

## Sources/Models
- [Clixdevice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixDevice.swift): Defines the `ClixDevice` `Codable` model encapsulating device, OS, locale, app, SDK, advertising ID, and push-notification metadata used for serialization and transmission to Clix backend APIs.
- [Clixuserproperty](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixUserProperty.swift): ClixUserProperty.swift defines a Codable ClixUserProperty (name, value: AnyCodable, type) and PropertyType enum, exposing init and static of(name:value) factory that infers types (Bool/NSNumber/String/Date→ISO via ClixDateFormatter) for serialization.
- [Clixpushnotificationpayload](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixPushNotificationPayload.swift): Defines ClixPushNotificationPayload (Codable) representing push fields and provides static decode(from userInfo:) that parses the "clix" userInfo (dictionary or JSON string) into the model using ClixJSONCoders.decoder and logs failures via ClixLogger.

## Sources/Notification
- [Clixnotificationserviceextension](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Notification/ClixNotificationServiceExtension.swift): ClixNotificationServiceExtension is a UNNotificationServiceExtension subclass that registers the Clix SDK via register(projectId:), awaits async initialization, calls Clix.shared.

## Sources/Services
- [Clixapiclient](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/ClixAPIClient.swift): Defines `ClixAPIClient`, an internal async HTTP wrapper that builds environment-aware `/api/v1` URLs, injects Clix auth/metadata headers (from `ClixConfig` or `Clix.shared`), and exposes typed `get`, `post`, `delete`, and `download` methods via the shared `HTTPClient`.
- [Storageservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/StorageService.swift): StorageService is an actor that asynchronously initializes a concrete Storage via StorageInitializer(projectId:), providing concurrency-safe, Codable-generic APIs (set/get/getWithRetry/remove/synchronize) that delegate persistence and retry semantics to the underlying Storage implementation.
- [Eventservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/EventService.swift): EventService exposes async throws trackEvent(name:properties:messageId:userJourneyId:userJourneyNodeId:) that retrieves deviceId from Clix.environment, serializes non-nil properties into AnyCodable (booleans vs numbers, Dates→ISO strings, strings/others), calls EventAPIService, logs and rethrows errors.
- [Deviceapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/DeviceAPIService.swift): DeviceAPIService (subclassing ClixAPIClient) exposes async throws methods—upsertDevice, setProjectUserId, upsertUserProperties, removeUserProperties—that marshal ClixDevice/ClixUserProperty into JSON (via ClixJSONCoders/JSONSerialization) and POST/DELETE to /devices endpoints, expecting EmptyResponse.
- [Deviceservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/DeviceService.swift): Actor DeviceService manages device identity and remote syncing: persists/generates deviceId in StorageService, builds ClixDevice (createDevice), updates Clix.shared environment, upserts/removes user properties and projectUserId via DeviceAPIService, and saves push tokens via TokenService.
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/NotificationService.swift): NotificationService handles push payload decoding, deduplicated event tracking (handlePushReceived/handlePushTapped) via EventService, image extraction/download into UNNotificationAttachment, user permission/settings persistence via StorageService, and exposes async/callback APIs for processing and resets.
- [Eventapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/EventAPIService.swift): EventAPIService (ClixAPIClient) exposes async throws trackEvent(..
- [Tokenservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/TokenService.swift): Manages APNs push token persistence and migration using `StorageService`, exposing async APIs to get/set the current token, maintain a capped history of previous tokens, clear all tokens, and convert `Data` device tokens to hex strings.

## Sources/Utils
- [Bundleidentifier](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/BundleIdentifier.swift): Provides cached app bundle identifier resolution (handles app extensions by resolving host app bundle), constructs app-group IDs from bundle or project IDs, determines available app-group (checks FileManager.containerURL), and exposes main, bundleIdBasedAppGroupId, projectIdBasedAppGroupId, availableAppGroupId.
- [Clixjsoncoders](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixJSONCoders.swift): Defines ClixJSONCoders.encoder and.
- [Clixdateformatter](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixDateFormatter.swift): Provides a namespace-style ClixDateFormatter that formats Dates to ISO8601 strings (internet date-time with time zone) via a lazily-initialized ISO8601DateFormatter using TimeZone.current; public API: static func format(_ date: Date) -> String.
- [Clixerror](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixError.swift): Defines the `ClixError` enum as the SDK’s central error type (conforming to `Error`, `LocalizedError`, `Equatable`, `CustomStringConvertible`), modeling initialization/configuration/network/encoding/decoding failures with localized descriptions and custom equality for network, decoding, and unknown errors.

## Sources/Utils/AnyCodable
- [Anydecodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyDecodable.swift): Defines `AnyDecodable`, a type-erased `Decodable` wrapper that decodes JSON scalars, arrays, and dictionaries into `Any`, provides value-based `Equatable`, `Hashable`, and string/debug descriptions, and is used for heterogeneous payloads via `[String: AnyDecodable]` or `[AnyDecodable]`.
- [Anycodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyCodable.swift): Defines `AnyCodable`, a type-erased `Codable` wrapper that forwards encoding/decoding via `_AnyEncodable`/`_AnyDecodable`, supports literal initialization, equality, hashing, and string/debug descriptions for common primitive/collection types used in heterogeneous payloads.
- [Anyencodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyEncodable.swift): Defines `AnyEncodable`, a type-erased `Encodable` wrapper that supports literal initialization, heterogeneous collection encoding (including Foundation types like `NSNumber`, `Date`, `URL`), and provides custom `Equatable`, `Hashable`, and string description behavior via a shared `_AnyEncodable` implementation.

## Sources/Utils/HTTP
- [Httprequest](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPRequest.swift): Defines a lightweight `HTTPRequest` value type encapsulating request URL, HTTP method, query/body parameters, headers, and an optional `Encodable` payload for use by higher-level networking components in the SDK’s HTTP utilities.
- [Httpresponse](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPResponse.swift): Defines a generic HTTPResponse wrapper that carries typed response data, the HTTP status code, and raw headers, used as a common model for HTTP utilities and networking flows.
- [Httpmethod](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPMethod.swift): Defines the `HTTPMethod` string-backed enum encapsulating supported HTTP verbs (`GET`, `POST`, `PUT`, `DELETE`) for type-safe use across the SDK’s networking layer and request construction APIs.
- [Httpclient](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPClient.swift): HTTPClient is a singleton URLSession wrapper that builds JSON headers and query params, encodes bodies with ClixJSONCoders, decodes responses into Decodable types, logs output, maps errors to ClixError, and exposes request/get/post/put/delete/download APIs.

## Sources/Utils/Logging
- [Clixlogger](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/Logging/ClixLogger.swift): Provides a centralized, static logging utility around `os.Logger` for the SDK, with ISO8601-timestamped messages, configurable global `ClixLogLevel` via `setLogLevel`, and convenience entry points `debug`, `info`, `warn`, and `error` supporting optional `Error` details.
- [Clixloglevel](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/Logging/ClixLogLevel.swift): Defines the `ClixLogLevel` `Codable` and `Comparable` enum specifying ordered logging severity levels (`none`, `error`, `warn`, `info`, `debug`) used to configure and compare log verbosity throughout the Clix SDK.

## Tests
- [Clixtests](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Tests/ClixTests.swift): Defines the placeholder `ClixTests` XCTestCase class for the Clix module, providing a scaffold `testExample()` method to add unit tests that validate Clix’s public APIs and behaviors.

## Samples/BasicApp
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/README.md): Sample SwiftUI iOS app demonstrating Clix SDK integration for FCM push handling, rich-image Notification Service Extension, user identification and event tracking; depends on Firebase (GoogleService-Info.plist), App Groups, and uses ClixConfiguration.

## Samples/CocoaPods
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/CocoaPods/README.md): README for CocoaPods sample demonstrating CocoaPods-based Clix SDK integration: pod 'Clix' as local pod, load ClixConfig.json and call Clix.

## Sources/Storage
- [Userdefaultsstorage](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/UserDefaultsStorage.swift): Actor-based UserDefaultsStorage wraps UserDefaults (standard or app-group suite), encoding/decoding Codable values with JSONEncoder/Decoder, exposing set/get/getRawData/setRawData/remove, async getWithRetry(fallback, retryDelayMs) with simple sleep retry, logs actions; synchronize is no-op.
- [Storagetypemigrator](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/StorageTypeMigrator.swift): StorageTypeMigrator.migrateIfNeeded asynchronously checks StorageMigrator.
- [Storagemigrator](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/StorageMigrator.swift): StorageMigrator provides key-based migration utilities (knownStorageKeys) to copy Data blobs between MMKV or UserDefaults stores via generic migrateKeys, with specialized migrateMmkvToMmkv/migrateUserDefaultsToUserDefaults, optional removal/sync behavior, logging, and returning migrated count.
- [Storageinitializer](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/StorageInitializer.swift): Initializes and returns the appropriate Storage (MmkvStorage or UserDefaultsStorage) for a project by detecting bundle/project app groups, performing one‑time migrations (MMKV/UserDefaults -> bundleId MMKV), synchronizing/deleting migrated keys, and setting a migration flag; entry: initializeStorage(projectId:).
- [Storage](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/Storage.swift): Defines the Storage actor protocol (requires Foundation) providing thread-safe, actor-based generic Codable get/set, raw Data get/set, remove, synchronize, and async getWithRetry(fallbackValue:retryDelayMs:) with retry semantics for resilient reads.
- [Mmkvstorage](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/MmkvStorage.swift): Actor-based MmkvStorage (Storage) wraps MMKV initialization using projectId/appGroupId (multi/single-process), handles fallback/default initialization and logging, uses JSONEncoder/Decoder, and exposes Codable set/get, raw get/set, getWithRetry (synchronize+sleep), remove, and synchronize.
