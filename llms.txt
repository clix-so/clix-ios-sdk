<!-- repo: clix-so/clix-ios-sdk -->
<!-- ref: main -->
<!-- commit: f172b1a36d895966f9936a16ed846430c0e5b1cf -->
<!-- generated_at: 2025-11-17T06:52:16Z -->
# Platform: iOS

## /
- [Package](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Package.swift): Defines the Swift Package manifest for the `Clix` iOS 15+ SDK, wiring the core library target to FirebaseMessaging, configuring debug/release Swift defines, and exposing the `Clix` library, `BasicApp` sample executable, and `ClixTests` test target.
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/README.md): Developer README describing Clix iOS SDK installation (SPM/CocoaPods), configuration (`ClixConfig`), async/sync APIs for user/events, push integration via `ClixAppDelegate` or `Clix.Notification`, Notification Service Extension usage, Firebase/iOS requirements, error handling, and project metadata (license, changelog, contributing).

## Samples/BasicApp/ClixNotificationExtension
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/ClixNotificationExtension/NotificationService.swift): Implements the notification service extension by subclassing `ClixNotificationServiceExtension`, registering the Clix project ID on init, delegating `UNNotificationServiceExtension` lifecycle methods (`didReceive`, `serviceExtensionTimeWillExpire`) to the Clix SDK, and adding basic logging.

## Samples/BasicApp/Sources
- [Appstate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppState.swift): Centralized `ObservableObject` singleton holding Clix sample app state, exposing published properties for SDK initialization status, device ID, and FCM token, with helper updaters that normalize missing values to user-friendly placeholder strings.
- [Basicapp](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/BasicApp.swift): Defines the BasicApp SwiftUI entry point, wiring the UIKit-based `AppDelegate` via `@UIApplicationDelegateAdaptor`, configuring global `UITextView` appearance, and presenting `ContentView` within the main `WindowGroup` scene.
- [Clixconfiguration](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/ClixConfiguration.swift): Defines the `ClixConfiguration` enum holding the app’s `projectId` and `apiKey` constants used to initialize and authenticate the Clix iOS SDK within the BasicApp sample.
- [Splashview](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/SplashView.swift): Displays a full-screen black splash screen using SwiftUI, centering a resizable “Logo” image; used as the app’s initial view with no external dependencies or public APIs beyond the `SplashView` entry point.
- [Appdelegate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppDelegate.swift): Sample `AppDelegate` demonstrating how to subclass `ClixAppDelegate` to initialize Clix and Firebase, manage user ID and push tokens (APNS/FCM), and propagate the Clix device ID and FCM token into shared `AppState` during app launch and notification registration callbacks.
- [Theme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/Theme.swift): Defines the `AppTheme` struct that centralizes static `SwiftUI.Color` constants for background, surfaces, primary tint, button styling, and general text colors used throughout the BasicApp sample UI.
- [Contentview](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/ContentView.swift): ContentView.swift defines the sample app’s main SwiftUI screen that displays Clix configuration/device info and provides UI flows to set the user ID, update user properties, and track events (JSON-parsed properties) via the Clix SDK, persisting user_id with UserDefaults.

## Sources/Core
- [Clixnotification](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixNotification.swift): Centralized push notification manager integrating UNUserNotificationCenterDelegate and Firebase Messaging, exposing setup/handler APIs (e.g.
- [Clixconfig](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixConfig.swift): Defines the `ClixConfig` `Codable` struct used to initialize and configure the Clix SDK, encapsulating project ID, API key, API endpoint, log level, and extra HTTP headers with sensible defaults for network and logging behavior.
- [Clix](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/Clix.swift): Defines the `Clix` singleton as the main SDK entry point, wiring Storage/Token/Event/Device/Notification services, coordinating async/sync initialization via `InitCoordinator`, and exposing public APIs for user identity, properties, event tracking, logging, and device/push token access.
- [Clixappdelegate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixAppDelegate.swift): Provides a base `UIApplicationDelegate` and `UNUserNotificationCenterDelegate` that wires APNs/Firebase push lifecycle events into `Clix.Notification`, with overridable hooks for auto authorization, auto-opening landing URLs, and custom foreground presentation behavior.
- [Clixenvironment](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixEnvironment.swift): Defines `ClixEnvironment`, a lightweight container for `ClixConfig` and mutable `ClixDevice` state, exposing `getDevice()`, `setDevice(_:)`, and a string representation used to describe the current SDK runtime environment.
- [Clixversion](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixVersion.swift): Defines the internal `ClixVersion` struct exposing the SDK’s current version via the `current` static string, which is auto-updated by `scripts/update-version.sh` and can be used for version checks, logging, or telemetry.

## Sources/Models
- [Clixdevice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixDevice.swift): Defines the `ClixDevice` `Codable` model encapsulating device, OS, locale, app, SDK, advertising ID, and push-notification metadata used for serialization and transmission to Clix backend APIs.
- [Clixuserproperty](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixUserProperty.swift): Defines the `ClixUserProperty` codable model, including a typed `PropertyType` enum and a factory `of(name:value:)` that infers type from Swift values (Bool, NSNumber, String, Date via `ClixDateFormatter`, or fallback string) using `AnyCodable`.
- [Clixpushnotificationpayload](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixPushNotificationPayload.swift): Defines the `ClixPushNotificationPayload` `Codable` model representing incoming Clix push metadata (IDs, landing/image URLs, and arbitrary `AnyCodable` customProperties) used for decoding and handling push notification payloads within the SDK.

## Sources/Notification
- [Clixnotificationserviceextension](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Notification/ClixNotificationServiceExtension.swift): Implements a `UNNotificationServiceExtension` subclass that initializes the Clix SDK (`register(projectId:)`), retrieves `notificationService` via `Clix.shared`, tracks push receipt, processes rich-media notifications (`processNotificationWithImage`), and safely falls back when the extension times out.

## Sources/Services
- [Clixapiclient](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/ClixAPIClient.swift): Defines `ClixAPIClient`, an internal async HTTP wrapper that builds environment-aware `/api/v1` URLs, injects Clix auth/metadata headers (from `ClixConfig` or `Clix.shared`), and exposes typed `get`, `post`, `delete`, and `download` methods via the shared `HTTPClient`.
- [Storageservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/StorageService.swift): Actor-based storage service wrapping UserDefaults (preferring an App Group suite for a given projectId) to persist Codable values, with typed set/get APIs, retry-based getWithRetry sync helper, and basic remove/synchronize utilities plus logging side-effects.
- [Eventservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/EventService.swift): Tracks analytics events via `trackEvent(..
- [Deviceapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/DeviceAPIService.swift): Defines `DeviceAPIService`, a `ClixAPIClient` subclass that JSON-encodes `ClixDevice` and user property payloads and exposes async APIs (`upsertDevice`, `setProjectUserId`, `upsertUserProperties`, `removeUserProperties`) for posting/deleting device-related data to `/devices`-scoped endpoints.
- [Deviceservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/DeviceService.swift): `DeviceService` is an actor that manages persistent device identity, synchronizes `ClixDevice` metadata (push token, push permission, user properties, project user ID) with backend via `DeviceAPIService`, updates the global `Clix` environment, and builds initial `ClixDevice` instances from system APIs.
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/NotificationService.swift): Implements push notification handling and configuration, including Clix payload parsing (`message_id`, journey IDs, `image_url`), image attachment downloading, permission and preference management via `UNUserNotificationCenter`/`StorageService`, event tracking via `EventService`, and full notification reset.
- [Eventapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/EventAPIService.swift): Defines `EventRequestBody`, `EventResponseBody`, and `EventsResponse` models and the `EventAPIService.trackEvent(.
- [Tokenservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/TokenService.swift): Manages APNs push token persistence and migration using `StorageService`, exposing async APIs to get/set the current token, maintain a capped history of previous tokens, clear all tokens, and convert `Data` device tokens to hex strings.

## Sources/Utils
- [Dateformatter](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/DateFormatter.swift): Provides a utility for formatting `Date` instances into ISO 8601 internet date-time strings using a shared `ISO8601DateFormatter` configured with the current time zone via the static `ClixDateFormatter.format(_:)` API.
- [Clixerror](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixError.swift): Defines the `ClixError` enum as the SDK’s central error type (conforming to `Error`, `LocalizedError`, `Equatable`, `CustomStringConvertible`), modeling initialization/configuration/network/encoding/decoding failures with localized descriptions and custom equality for network, decoding, and unknown errors.

## Sources/Utils/AnyCodable
- [Anydecodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyDecodable.swift): Defines `AnyDecodable`, a type-erased `Decodable` wrapper that decodes JSON scalars, arrays, and dictionaries into `Any`, provides value-based `Equatable`, `Hashable`, and string/debug descriptions, and is used for heterogeneous payloads via `[String: AnyDecodable]` or `[AnyDecodable]`.
- [Anycodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyCodable.swift): Defines `AnyCodable`, a type-erased `Codable` wrapper that forwards encoding/decoding via `_AnyEncodable`/`_AnyDecodable`, supports literal initialization, equality, hashing, and string/debug descriptions for common primitive/collection types used in heterogeneous payloads.
- [Anyencodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyEncodable.swift): Defines `AnyEncodable`, a type-erased `Encodable` wrapper that supports literal initialization, heterogeneous collection encoding (including Foundation types like `NSNumber`, `Date`, `URL`), and provides custom `Equatable`, `Hashable`, and string description behavior via a shared `_AnyEncodable` implementation.

## Sources/Utils/HTTP
- [Httprequest](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPRequest.swift): Defines a lightweight `HTTPRequest` value type encapsulating request URL, HTTP method, query/body parameters, headers, and an optional `Encodable` payload for use by higher-level networking components in the SDK’s HTTP utilities.
- [Httpresponse](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPResponse.swift): Defines a generic HTTPResponse wrapper that carries typed response data, the HTTP status code, and raw headers, used as a common model for HTTP utilities and networking flows.
- [Httpmethod](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPMethod.swift): Defines the `HTTPMethod` string-backed enum encapsulating supported HTTP verbs (`GET`, `POST`, `PUT`, `DELETE`) for type-safe use across the SDK’s networking layer and request construction APIs.
- [Httpclient](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPClient.swift): Provides a singleton async HTTP client wrapping URLSession with JSON encode/decode (custom date strategies), query/header construction, logging, standardized error handling, and generic helpers for GET/POST/PUT/DELETE (`request(..

## Sources/Utils/Logging
- [Clixlogger](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/Logging/ClixLogger.swift): Provides a centralized, static logging utility around `os.Logger` for the SDK, with ISO8601-timestamped messages, configurable global `ClixLogLevel` via `setLogLevel`, and convenience entry points `debug`, `info`, `warn`, and `error` supporting optional `Error` details.
- [Clixloglevel](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/Logging/ClixLogLevel.swift): Defines the `ClixLogLevel` `Codable` and `Comparable` enum specifying ordered logging severity levels (`none`, `error`, `warn`, `info`, `debug`) used to configure and compare log verbosity throughout the Clix SDK.

## Tests
- [Clixtests](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Tests/ClixTests.swift): Defines the placeholder `ClixTests` XCTestCase class for the Clix module, providing a scaffold `testExample()` method to add unit tests that validate Clix’s public APIs and behaviors.
