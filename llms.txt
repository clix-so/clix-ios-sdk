<!-- repo: clix-so/clix-ios-sdk -->
<!-- ref: main -->
<!-- commit: fa4784b356316b4d35c7bb5862eb633ae4a07d2c -->
<!-- generated_at: 2026-02-13T09:25:56Z -->
# Platform: iOS

## /
- [Package](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Package.swift): Swift Package manifest configuring the Clix SPM library (iOS 15+), exposing target "Clix" (Sources) with SPM dependencies FirebaseMessaging and MMKV (version ranges), build settings defining DEBUG/RELEASE flags, and a ClixTests test target.
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/README.md): README for Clix iOS SDK: guides installation (SPM/CocoaPods), initialization via await Clix.initialize(ClixConfig), core APIs (Clix.

## Samples/BasicApp/ClixNotificationExtension
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/ClixNotificationExtension/NotificationService.swift): NotificationService.swift defines NotificationService, a UNNotificationServiceExtension subclass that registers ClixConfiguration.

## Samples/BasicApp/Sources
- [Liveactivitymanager](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/LiveActivityManager.swift): Singleton ObservableObject managing an ActivityKit (iOS 16.2+) DeliveryActivityAttributes live activity (start/update/end), exposing @Published isActive and methods start(), update(status:), end(); performs Activity.
- [Deliveryactivityattributes](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/DeliveryActivityAttributes.swift): Defines DeliveryActivityAttributes, an ActivityKit-conforming model (with nested Codable/Hashable ContentState) representing Live Activity payloads—orderNumber and restaurantName metadata plus mutable status and estimatedDeliveryTime to drive Live Activity updates.
- [Apptheme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppTheme.swift): Defines AppTheme static Color constants for the BasicApp sample (background, surface, surfaceVariant, primary, buttonBackground, buttonText, text) using SwiftUI Color values—no side effects, used for consistent theming across views.
- [Appstate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppState.swift): Singleton ObservableObject (AppState.shared) exposing @Published deviceId and fcmToken (initial "Loading.
- [Basicapp](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/BasicApp.swift): Defines the BasicApp SwiftUI entry point, wiring the UIKit-based `AppDelegate` via `@UIApplicationDelegateAdaptor`, configuring global `UITextView` appearance, and presenting `ContentView` within the main `WindowGroup` scene.
- [Clixconfiguration](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/ClixConfiguration.swift): Singleton that loads ClixConfig.json from the app bundle (fatalError on failure), caches its contents, and exposes lazy properties (projectId, apiKey, endpoint, extraHeaders, logLevel defaulting to.
- [Appdelegate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/AppDelegate.swift): AppDelegate subclass of ClixAppDelegate that initializes Firebase and Clix (including LiveActivity), auto-handles permissions/landing URLs, syncs device and FCM tokens via Clix APIs (getDeviceId, Notification.getToken, setUserId), and updates AppState on token/registration events.
- [Contentview](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/Sources/ContentView.swift): SwiftUI ContentView (with LiveActivitySection and InfoTextRow) providing the sample app UI that displays ClixConfiguration/AppState info and lets developers set user_id (persisted to UserDefaults), set user properties, and track events (Clix.setUserId/setUserProperty/trackEvent); depends on Clix, AppState, LiveActivityManager, AppTheme.

## Sources/Core
- [Clixliveactivity](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixLiveActivity.swift): ClixLiveActivity is a singleton wrapper around LiveActivityService that (via public generic setup(_:)) asynchronously starts listening for push-to-start ActivityKit tokens for a given ActivityAttributes type (Task-based, checks iOS 17.2+, not available in app extensions).
- [Clixnotification](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixNotification.swift): ClixNotification manages push lifecycle and Firebase Messaging integration (Messaging & UNUserNotificationCenter delegates), registers for remote notifications, processes/upserts FCM tokens, handles permission requests, foreground/background handlers, image download/re-post, and auto-opens landing URLs via Clix services.
- [Clixconfig](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixConfig.swift): ClixConfig is a Codable struct that encapsulates SDK configuration (projectId, apiKey, endpoint defaulting to https://api.clix.
- [Clix](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/Clix.swift): Clix is the SDK singleton main entry that asynchronously/synchronously initializes Storage, Token, Event, Device, Notification and Session services, provides thread‑safe APIs (initialize, setUserId/setUserProperties, trackEvent, getDeviceId) and coordinates push via ClixNotification.
- [Clixappdelegate](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixAppDelegate.swift): ClixAppDelegate is an open UIApplicationDelegate/UNUserNotificationCenterDelegate base class that wires UNUserNotificationCenter, forwards APNs token, launch/foreground/background notifications and responses to Clix.Notification, configurable via overridable properties; depends on FirebaseCore/FirebaseMessaging.
- [Clixenvironment](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixEnvironment.swift): Defines `ClixEnvironment`, a lightweight container for `ClixConfig` and mutable `ClixDevice` state, exposing `getDevice()`, `setDevice(_:)`, and a string representation used to describe the current SDK runtime environment.
- [Clixversion](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Core/ClixVersion.swift): Internal ClixVersion struct exposes an auto-updated internal static let `current: String` (1.8.

## Sources/Models
- [Clixdevice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixDevice.swift): Defines the `ClixDevice` `Codable` model encapsulating device, OS, locale, app, SDK, advertising ID, and push-notification metadata used for serialization and transmission to Clix backend APIs.
- [Clixuserproperty](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixUserProperty.swift): ClixUserProperty.swift defines a Codable ClixUserProperty (name, value: AnyCodable, type) and PropertyType enum, exposing init and static of(name:value) factory that infers types (Bool/NSNumber/String/Date→ISO via ClixDateFormatter) for serialization.
- [Clixpushnotificationpayload](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Models/ClixPushNotificationPayload.swift): Defines ClixPushNotificationPayload (Codable) representing push fields and provides static decode(from userInfo:) that parses the "clix" userInfo (dictionary or JSON string) into the model using ClixJSONCoders.decoder and logs failures via ClixLogger.

## Sources/Notification
- [Clixnotificationserviceextension](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Notification/ClixNotificationServiceExtension.swift): ClixNotificationServiceExtension is a UNNotificationServiceExtension subclass that registers the Clix SDK via register(projectId:), awaits async initialization, calls Clix.shared.

## Sources/Services
- [Sessionservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/SessionService.swift): SessionService manages session lifecycle (start/continue), persists last-activity timestamp via StorageService, emits SESSION_START through EventService with optional pendingMessageId, enforces sessionTimeoutMs, exposes start(), setupLifecycleObservers() (non-extension) and setPendingMessageId().
- [Liveactivityservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/LiveActivityService.swift): Actor LiveActivityService (iOS 16.1+) manages push-to-start tokens by spawning a background listener via startListeningForPushToStartToken<Attributes: ActivityAttributes>, requires iOS 17.
- [Liveactivityapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/LiveActivityAPIService.swift): LiveActivityAPIService exposes async registerLiveActivityStartToken(deviceId:activityType:token:) which POSTs a JSON body with attributes_type and push_to_start_token to /devices/{deviceId}/live-activity-start-tokens via ClixAPIClient to register a Live Activity start token (expects EmptyResponse).
- [Clixapiclient](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/ClixAPIClient.swift): Defines `ClixAPIClient`, an internal async HTTP wrapper that builds environment-aware `/api/v1` URLs, injects Clix auth/metadata headers (from `ClixConfig` or `Clix.shared`), and exposes typed `get`, `post`, `delete`, and `download` methods via the shared `HTTPClient`.
- [Storageservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/StorageService.swift): StorageService is an actor that asynchronously initializes a concrete Storage via StorageInitializer(projectId:), providing concurrency-safe, Codable-generic APIs (set/get/getWithRetry/remove/synchronize) that delegate persistence and retry semantics to the underlying Storage implementation.
- [Eventservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/EventService.swift): EventService exposes async trackEvent(name:properties:messageId:userJourneyId:userJourneyNodeId:sourceType:) that retrieves deviceId from Clix.shared.
- [Deviceapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/DeviceAPIService.swift): DeviceAPIService (subclassing ClixAPIClient) exposes async throws methods—upsertDevice, setProjectUserId, upsertUserProperties, removeUserProperties—that marshal ClixDevice/ClixUserProperty into JSON (via ClixJSONCoders/JSONSerialization) and POST/DELETE to /devices endpoints, expecting EmptyResponse.
- [Deviceservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/DeviceService.swift): Actor DeviceService manages device identity and remote syncing: persists/generates deviceId in StorageService, builds ClixDevice (createDevice), updates Clix.shared environment, upserts/removes user properties and projectUserId via DeviceAPIService, and saves push tokens via TokenService.
- [Notificationservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/NotificationService.swift): NotificationService manages push events and notification images: decodes Clix payloads, deduplicates received messages, tracks events via EventService, downloads and attaches images (HTTPClient -> UNNotificationAttachment), persists settings/lastMessageId via StorageService, and requests/resets UNUserNotificationCenter permissions.
- [Eventapiservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/EventAPIService.swift): EventAPIService (subclass of ClixAPIClient) provides an async throws trackEvent(..
- [Tokenservice](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Services/TokenService.swift): Manages APNs push token persistence and migration using `StorageService`, exposing async APIs to get/set the current token, maintain a capped history of previous tokens, clear all tokens, and convert `Data` device tokens to hex strings.

## Sources/Utils
- [Bundleidentifier](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/BundleIdentifier.swift): Provides cached app bundle identifier resolution (handles app extensions by resolving host app bundle), constructs app-group IDs from bundle or project IDs, determines available app-group (checks FileManager.containerURL), and exposes main, bundleIdBasedAppGroupId, projectIdBasedAppGroupId, availableAppGroupId.
- [Clixjsoncoders](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixJSONCoders.swift): Defines ClixJSONCoders.encoder and.
- [Clixdateformatter](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixDateFormatter.swift): Provides a namespace-style ClixDateFormatter that formats Dates to ISO8601 strings (internet date-time with time zone) via a lazily-initialized ISO8601DateFormatter using TimeZone.current; public API: static func format(_ date: Date) -> String.
- [Clixerror](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/ClixError.swift): Defines the `ClixError` enum as the SDK’s central error type (conforming to `Error`, `LocalizedError`, `Equatable`, `CustomStringConvertible`), modeling initialization/configuration/network/encoding/decoding failures with localized descriptions and custom equality for network, decoding, and unknown errors.

## Sources/Utils/AnyCodable
- [Anydecodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyDecodable.swift): Defines `AnyDecodable`, a type-erased `Decodable` wrapper that decodes JSON scalars, arrays, and dictionaries into `Any`, provides value-based `Equatable`, `Hashable`, and string/debug descriptions, and is used for heterogeneous payloads via `[String: AnyDecodable]` or `[AnyDecodable]`.
- [Anycodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyCodable.swift): Defines `AnyCodable`, a type-erased `Codable` wrapper that forwards encoding/decoding via `_AnyEncodable`/`_AnyDecodable`, supports literal initialization, equality, hashing, and string/debug descriptions for common primitive/collection types used in heterogeneous payloads.
- [Anyencodable](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/AnyCodable/AnyEncodable.swift): Defines `AnyEncodable`, a type-erased `Encodable` wrapper that supports literal initialization, heterogeneous collection encoding (including Foundation types like `NSNumber`, `Date`, `URL`), and provides custom `Equatable`, `Hashable`, and string description behavior via a shared `_AnyEncodable` implementation.

## Sources/Utils/HTTP
- [Httprequest](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPRequest.swift): Defines a lightweight `HTTPRequest` value type encapsulating request URL, HTTP method, query/body parameters, headers, and an optional `Encodable` payload for use by higher-level networking components in the SDK’s HTTP utilities.
- [Httpresponse](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPResponse.swift): Defines a generic HTTPResponse wrapper that carries typed response data, the HTTP status code, and raw headers, used as a common model for HTTP utilities and networking flows.
- [Httpmethod](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPMethod.swift): Defines the `HTTPMethod` string-backed enum encapsulating supported HTTP verbs (`GET`, `POST`, `PUT`, `DELETE`) for type-safe use across the SDK’s networking layer and request construction APIs.
- [Httpclient](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/HTTP/HTTPClient.swift): HTTPClient is a singleton URLSession wrapper that builds JSON headers and query params, encodes bodies with ClixJSONCoders, decodes responses into Decodable types, logs output, maps errors to ClixError, and exposes request/get/post/put/delete/download APIs.

## Sources/Utils/Logging
- [Clixlogger](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/Logging/ClixLogger.swift): Provides a centralized, static logging utility around `os.Logger` for the SDK, with ISO8601-timestamped messages, configurable global `ClixLogLevel` via `setLogLevel`, and convenience entry points `debug`, `info`, `warn`, and `error` supporting optional `Error` details.
- [Clixloglevel](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Utils/Logging/ClixLogLevel.swift): Defines the `ClixLogLevel` `Codable` and `Comparable` enum specifying ordered logging severity levels (`none`, `error`, `warn`, `info`, `debug`) used to configure and compare log verbosity throughout the Clix SDK.

## Tests
- [Clixtests](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Tests/ClixTests.swift): Defines the placeholder `ClixTests` XCTestCase class for the Clix module, providing a scaffold `testExample()` method to add unit tests that validate Clix’s public APIs and behaviors.

## Samples/BasicApp
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/README.md): Sample SwiftUI iOS app demonstrating Clix SDK integration for FCM push handling, rich-image Notification Service Extension, user identification and event tracking; depends on Firebase (GoogleService-Info.plist), App Groups, and uses ClixConfiguration.

## Samples/CocoaPods
- [Readme](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/CocoaPods/README.md): README for CocoaPods sample demonstrating CocoaPods-based Clix SDK integration: pod 'Clix' as local pod, load ClixConfig.json and call Clix.

## Sources/Storage
- [Userdefaultsstorage](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/UserDefaultsStorage.swift): Actor-based UserDefaultsStorage wraps UserDefaults (standard or app-group suite), encoding/decoding Codable values with JSONEncoder/Decoder, exposing set/get/getRawData/setRawData/remove, async getWithRetry(fallback, retryDelayMs) with simple sleep retry, logs actions; synchronize is no-op.
- [Storagetypemigrator](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/StorageTypeMigrator.swift): StorageTypeMigrator.migrateIfNeeded asynchronously checks StorageMigrator.
- [Storagemigrator](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/StorageMigrator.swift): StorageMigrator exposes knownStorageKeys plus a generic migrateKeys and convenience migrateMmkvToMmkv/migrateUserDefaultsToUserDefaults to copy Data keys between MMKV/UserDefaults, optionally removing originals, performing syncs, and logging migrations; returns migrated count.
- [Storageinitializer](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/StorageInitializer.swift): Initializes and returns the appropriate Storage (MmkvStorage or UserDefaultsStorage) for a project by detecting bundle/project app groups, performing one‑time migrations (MMKV/UserDefaults -> bundleId MMKV), synchronizing/deleting migrated keys, and setting a migration flag; entry: initializeStorage(projectId:).
- [Storage](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/Storage.swift): Defines the Storage actor protocol (requires Foundation) providing thread-safe, actor-based generic Codable get/set, raw Data get/set, remove, synchronize, and async getWithRetry(fallbackValue:retryDelayMs:) with retry semantics for resilient reads.
- [Mmkvstorage](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Sources/Storage/MmkvStorage.swift): Actor-based MmkvStorage (Storage) wraps MMKV initialization using projectId/appGroupId (multi/single-process), handles fallback/default initialization and logging, uses JSONEncoder/Decoder, and exposes Codable set/get, raw get/set, getWithRetry (synchronize+sleep), remove, and synchronize.

## Samples/BasicApp/DeliveryLiveActivityWidget
- [Deliveryliveactivitywidgetliveactivity](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/DeliveryLiveActivityWidget/DeliveryLiveActivityWidgetLiveActivity.swift): Defines DeliveryLiveActivityWidgetAttributes and DeliveryLiveActivityWidgetLiveActivity using ActivityKit, WidgetKit and SwiftUI to render a Live Activity/Dynamic Island UI (lock screen/banner, expanded regions, compact/minimal states), configures ActivityConfiguration, widgetURL, keylineTint and previews.
- [Deliveryliveactivitywidgetcontrol](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/DeliveryLiveActivityWidget/DeliveryLiveActivityWidgetControl.swift): Defines DeliveryLiveActivityWidgetControl, a ControlWidget using StaticControlConfiguration and a ControlWidgetToggle bound to a Provider (ControlValueProvider) and StartTimerIntent (SetValueIntent) to read current timer state and start/stop the timer; imports AppIntents, SwiftUI, WidgetKit.
- [Deliveryliveactivitywidgetbundle](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/DeliveryLiveActivityWidget/DeliveryLiveActivityWidgetBundle.swift): Defines the @main WidgetBundle entry point for the widget extension, importing SwiftUI and WidgetKit and exposing DeliveryLiveActivityWidget via the bundle's body to register the widget with the system.
- [Deliveryliveactivitywidget](https://raw.githubusercontent.com/clix-so/clix-ios-sdk/main/Samples/BasicApp/DeliveryLiveActivityWidget/DeliveryLiveActivityWidget.swift): Defines DeliveryLiveActivityWidget (Widget) providing an ActivityConfiguration for DeliveryActivityAttributes that builds lock‑screen and Dynamic Island UIs using ActivityKit, WidgetKit and SwiftUI, renders context.attributes/state (restaurantName/orderNumber/status/ETA), and maps status strings to SF Symbols via statusIcon(_:).
